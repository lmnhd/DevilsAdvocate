# CLAUDE.md - Agent Guidance for DevilsAdvocate

## ðŸŽ¯ Project Overview

**Project Name**: DevilsAdvocate  
**Framework**: next-js  
**Description**: Multi-agent debate framework for fact-checking and bias detection with real-time streaming dual-perspective analysis

This file provides detailed guidance for AI agents (Claude Code, direct Claude usage, etc.) working on this project.

---

## Critical Rules

### 1. Follow Workspace Standards

All universal coding standards from the Master Workspace apply:
- **NEVER use `any` types** in TypeScript
- **PowerShell syntax**: Use `;` for chaining (NEVER `&&`)
- **Git checkpoints**: Before significant changes
- **Strongly typed** objects/classes only

### 2. Reference Documentation

Before implementing any feature:
1. Read relevant section in `PDR.md`
2. Understand the "why" behind architectural decisions
3. Implement according to specification
4. Test against success criteria

### 3. Database Patterns

- **Database Type**: {{DATABASE}}
- Use service layer pattern for all data access
- Keep business logic separate from data access code
- Example pattern:
  ```typescript
  // src/lib/db/service.ts
  export async function getById(id: string) {
    // Database query logic
  }
  ```

### 4. API Patterns

- Separate business logic from route handlers
- Use `src/lib/` for core logic
- Keep route handlers thin (validation + orchestration only)
- Example structure:
  ```typescript
  // app/api/example/route.ts
  import { coreLogic } from '@/lib/example/core-logic';
  
  export async function POST(req: Request) {
    const body = await req.json();
    const result = await coreLogic(body);
    return Response.json(result);
  }
  ```

---

## Development Workflow

### Before Starting Work
1. Check `PDR.md` for feature specification
2. Review related code in codebase
3. Create git checkpoint: `git add .; git commit -m "checkpoint: before [feature]"`

### During Development
1. Implement feature according to spec
2. Test incrementally (create test pages if needed)
3. Reference this CLAUDE.md for patterns
4. Ask before making structural changes

### After Implementation
1. Test against success criteria in PDR.md
2. Commit with descriptive message
3. Update documentation if needed

---

## Common Patterns

### TypeScript Types
```typescript
// Always define explicit types
interface User {
  id: string;
  name: string;
  email: string;
}

// NEVER use any
// âŒ function getData(): any { ... }
// âœ… function getData(): User { ... }
```

### Error Handling
```typescript
try {
  const result = await operation();
  return { success: true, data: result };
} catch (error) {
  console.error('[Operation Error]:', error);
  return { success: false, error: 'Operation failed' };
}
```

### Environment Variables
```typescript
// Use env vars for sensitive data
const apiKey = process.env.API_KEY;
if (!apiKey) {
  throw new Error('API_KEY not configured');
}
```

---

## Testing Strategy

### Create Test Files
- Put test files in `tests/` directory
- For Next.js: Create test pages in `app/tests/` for UI testing
- Follow framework-specific testing conventions

### Test Incrementally
- Test each component/function as you build
- Use console.log liberally during development
- Create checkpoint commits before testing

---

## Key Files to Reference

### This Project
- `PDR.md` - Complete specification and architecture
- `README.md` - Setup instructions
- `.github/copilot-instructions.md` - Development rules

### Master Workspace
- `C:\Users\cclem\Dropbox\Source\.github\copilot-instructions.md` - Universal workspace standards

---

## Important Reminders

- âœ… **DO**: Follow specifications, test incrementally, use PowerShell syntax
- âœ… **DO**: Reference PDR.md, follow patterns, ask before structural changes
- âœ… **DO**: Create git checkpoints, use explicit types, separate concerns
- âŒ **DON'T**: Use `any` types, use `&&` for chaining, skip testing
- âŒ **DON'T**: Bypass specifications, make assumptions, commit untested code

---

**Project Type**: next-js  
**Status**: Ready for development  
**Created**: Generated by init-project.ps1 script

